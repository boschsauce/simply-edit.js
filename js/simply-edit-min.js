(function(e){e.fn.simplyedit=function(t){var n={height:"200",width:"100%",buttons:["font-size","bold","italic","underline","strikethrough","seperator","subscript","superscript","list-ol","list-ul","seperator","align-left","align-center","align-right","seperator","undo"]};var r=e.extend(n,t);return this.each(function(){function s(){var r=t.val();if(e.trim(r)==""){r="<br />"}if(n){o();return true}else{u()}t.after(n);var s="<html><head></head><body>"+r+"</body></html>";a(s,function(){e("#toolbar-"+i).remove();t.before(d());t.hide()})}function o(){t.hide();e(n).contents().find("body").html(content);e(n).show();e("#toolbar-"+i).remove();t.before(d())}function u(){n=document.createElement("iframe");n.frameBorder=0;n.frameMargin=0;n.framePadding=0;n.height=r.height;n.width=r.width;if(t.attr("class"))n.className=t.attr("class");if(t.attr("id"))n.id=i;if(t.attr("name"))n.title=t.attr("name")}function a(e,t){if(!n){return false}try{n.contentWindow.document.open();n.contentWindow.document.write(e);n.contentWindow.document.close()}catch(r){}if(document.contentEditable){n.contentWindow.document.designMode="On";t();return true}else if(document.designMode!=null){try{n.contentWindow.document.designMode="on";t();return true}catch(r){}}setTimeout(function(){a(e,t)},500);return false}function f(r){var i=e(n).contents().find("body").html();if(e(n).is(":visible")){t.val(i)}if(r!==true){t.show();e(n).hide()}}function l(t){return e.inArray(t,r.buttons)!=-1}function c(){var t="<div class='simply-edit-toolbar' id='toolbar-"+i+"'><div>";t+="<div class='btn-toolbar' role='toolbar'>";if(l("font-size")){t+=h()}t+=p();t+="</div>";return e(t)}function h(){return"<div class='btn-group'>          <select id='font-size' class='form-control input-sm' style='margin-bottom:0px;'>            <option value=''>Font Size</option>            <option value='1'>Very Small</option>            <option value='2'>Small</option>            <option value='3'>Normal</option>            <option value='4'>Medium</option>            <option value='5'>Big</option>          </select>        </div> "}function p(){var e="<div class='btn-group'>";for(var t=0;t<r.buttons.length;t++){var n=r.buttons[t];if(r.buttons[t]!="font-size"&&r.buttons[t]!="seperator"){e+="<button class='btn btn-default' type='button' id='"+n+"'><i class='fa fa-"+n+"'/></button> "}if(r.buttons[t]=="seperator"){e+="</div><div class='btn-group'>"}}e+="</div>";return e}function d(){var t=c();e("#bold",t).click(function(){v("bold");return false});e("#italic",t).click(function(){v("italic");return false});e("#underline",t).click(function(){v("underline");return false});e("#subscript",t).click(function(){v("subscript");return false});e("#superscript",t).click(function(){v("superscript");return false});e("#strikethrough",t).click(function(){v("strikeThrough");return false});e("#align-left",t).click(function(){v("justifyLeft");return false});e("#align-center",t).click(function(){v("justifyCenter");return false});e("#align-right",t).click(function(){v("justifyRight");return false});e("#undo",t).click(function(){v("undo");return false});e("#list-ul",t).click(function(){v("insertUnorderedList");return false});e("#list-ol",t).click(function(){v("insertOrderedList");return false});e("#font-size",t).change(function(){var e=this.selectedIndex;if(e!=0){var t=this.options[e].value;v("fontsize",t)}});if(r.dot_net_button_class){var i=e(n).parents("form").find(r.dot_net_button_class);i.click(function(){f(true)})}else{e(n).parents("form").submit(function(){f(true)})}var s=e(n.contentWindow.document);var o=e("select",t)[0];if(o){s.mouseup(function(){m(g(),o);return true});s.keyup(function(){m(g(),o);var t=e("body",s);if(t.scrollTop()>0){var i=parseInt(n.style["height"]);if(isNaN(i))i=0;var u=Math.min(r.height,i+t.scrollTop())+"px";n.style["height"]=u}return true})}return t}function v(e,t){n.contentWindow.focus();try{n.contentWindow.document.execCommand(e,false,t)}catch(r){}n.contentWindow.focus()}function m(e,t){while(e.parentNode){var n=e.nodeName.toLowerCase();for(var r=0;r<t.options.length;r++){if(n==t.options[r].value){t.selectedIndex=r;return true}}e=e.parentNode}t.selectedIndex=0;return true}function g(){if(n.contentWindow.document.selection){selection=n.contentWindow.document.selection;range=selection.createRange();try{node=range.parentElement()}catch(e){return false}}else{try{selection=n.contentWindow.getSelection();range=selection.getRangeAt(0)}catch(e){return false}node=range.commonAncestorContainer}return node}var t=e(this);var n;var i=t.attr("id");s()})}})(jQuery)
